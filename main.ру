# SolarShield AI MVP
# Простая модель прогнозирования солнечной бури

import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import accuracy_score

# Создаем искусственный датасет
np.random.seed(42)

data_size = 500

solar_flux = np.random.normal(150, 50, data_size)
magnetic_index = np.random.normal(5, 2, data_size)
solar_wind_speed = np.random.normal(400, 100, data_size)

# Если значения высокие — считаем это бурей
storm = (
    (solar_flux > 180) & 
    (magnetic_index > 6) & 
    (solar_wind_speed > 450)
).astype(int)

df = pd.DataFrame({
    "solar_flux": solar_flux,
    "magnetic_index": magnetic_index,
    "solar_wind_speed": solar_wind_speed,
    "storm": storm
})

X = df[["solar_flux", "magnetic_index", "solar_wind_speed"]]
y = df["storm"]

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

model = RandomForestClassifier()
model.fit(X_train, y_train)

predictions = model.predict(X_test)

accuracy = accuracy_score(y_test, predictions)

print("Model accuracy:", accuracy)

# Тестовый прогноз
sample = pd.DataFrame({
    "solar_flux": [200],
    "magnetic_index": [7],
    "solar_wind_speed": [500]
})

prediction = model.predict(sample)

if prediction[0] == 1:
    print("⚠ High probability of solar storm!")
else:
    print("✅ Low solar activity.")
